
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Tutorial &#8212; Minecraft-Connection-Tools 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="RCON Tutorial" href="rcon.html" />
    <link rel="prev" title="Installation" href="install.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="client-tutorial">
<h1>Client Tutorial<a class="headerlink" href="#client-tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This tutorial will give you insight and examples into common client features.
This is a general guide on client functionality. If you need specific information on a topic,
like interacting with a server via RCON, see the specific tutorial for that topic.</p>
<p>Now, all clients inherit from the BaseClient interface.
It defines features and usage present in all clients, regardless of operation.
The default configuration for clients are recommended for most users, as it will do the following:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Generate a request ID based on system time</p></li>
<li><p>Automatically replace format codes with appropriate ASCII values</p></li>
<li><p>Set socket timeout to 60 seconds</p></li>
</ol>
</div></blockquote>
<p>However, advanced users may find tweaking these features to be helpful.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In all following examples, we assume that a client is properly imported,
and has been instantiated under the name ‘client’</p>
</div>
</div>
<div class="section" id="client-methods">
<h2>Client Methods<a class="headerlink" href="#client-methods" title="Permalink to this headline">¶</a></h2>
<p>All clients have the following methods:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>is_connected()</p></li>
<li><p>start()</p></li>
<li><p>stop()</p></li>
<li><p>raw_send()</p></li>
<li><p>get_formatter()</p></li>
</ol>
</div></blockquote>
<div class="section" id="is-connected">
<h3>is_connected<a class="headerlink" href="#is-connected" title="Permalink to this headline">¶</a></h3>
<p>You can use this method to determine if a client is connected:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
</pre></div>
</div>
<p>This method returns a boolean, where True means we are connected, and False means we are not.
‘Connected’ simply means that we have established a TCP stream with the server
(Or started communicating in the case of UDP), and we are ready to send/receive information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Just because we are connected doesn’t mean we are authenticated! In the case of RCON,
you must authenticate first before sending commands.</p>
</div>
</div>
<div class="section" id="start">
<h3>start<a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h3>
<p>You can use this method to start the client, and any underlying protocol objects:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>This will, again, start the underlying protocol object, meaning that if we are communicating over TCP,
a TCP stream will be established.</p>
<p>start() is called automatically where appropriate, so you will not have to start the object yourself.</p>
</div>
<div class="section" id="stop">
<h3>stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h3>
<p>You can use this function to stop the client, and close any underlying protocol objects:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
<p>It is HIGHLY recommended to call this when you are done communicating with the server.
Not doing so could cause problems server side. Protocol objects will attempt to gracefully close the
connection when they are deleted, but this does not always work.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Due to the design of python sockets, once a client has been stopped, it can’t be started again.
You will have to create a new instance if you stop your current one.</p>
</div>
</div>
<div class="section" id="raw-send">
<h3>raw_send<a class="headerlink" href="#raw-send" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is recommended to use the high-level wrappers, as sending your own content could mess up the client instance!</p>
</div>
<p>This function gives you the ability to bypass the higher-level client wrappers and send your own information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">raw_send</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p>The usage of this command differs from client to client. See the documentation for specific client usage.</p>
</div>
<div class="section" id="get-formatters">
<h3>get_formatters<a class="headerlink" href="#get-formatters" title="Permalink to this headline">¶</a></h3>
<p>This function gives you access to the underlying Formatters instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">format</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_formatter</span><span class="p">()</span>
</pre></div>
</div>
<p>This returns the FormatterCollection instance in use by the client,
which will allow you to fine tune the formatter to your use.</p>
<p>More information can be found in the <a class="reference external" href="format.html">Formatter Tutorial.</a></p>
</div>
</div>
<div class="section" id="instantiating-clients">
<h2>Instantiating Clients<a class="headerlink" href="#instantiating-clients" title="Permalink to this headline">¶</a></h2>
<p>All clients have the same parameters when instantiating:</p>
<dl class="py class">
<dt id="Client">
<em class="property">class </em><code class="sig-name descname">Client</code><span class="sig-paren">(</span><em class="sig-param">host, port=[Port Num], reqid=None, format_method='replace', timeout=60</em><span class="sig-paren">)</span><a class="headerlink" href="#Client" title="Permalink to this definition">¶</a></dt>
<dd><p>A client implementation. All clients share this format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> – Hostname of the server</p></li>
<li><p><strong>port</strong> – Port number of the server</p></li>
<li><p><strong>reqid</strong> – Request ID to use</p></li>
<li><p><strong>format_method</strong> – Format method to use</p></li>
<li><p><strong>timeout</strong> – Timeout for socket operations</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>We can use these parameters to change the operation of clients.</p>
<div class="section" id="host">
<h3>host<a class="headerlink" href="#host" title="Permalink to this headline">¶</a></h3>
<p>The host of the server we are connecting to, this should be a string.</p>
</div>
<div class="section" id="port">
<h3>port<a class="headerlink" href="#port" title="Permalink to this headline">¶</a></h3>
<p>The port number of the server we are connecting to, this should be a integer.
The default port number differs from client to client.</p>
</div>
<div class="section" id="reqid">
<h3>reqid<a class="headerlink" href="#reqid" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Specifying your own request ID is not recommended!
Doing so could lead to unstable operation.</p>
</div>
<p>The request ID is what we use to identify ourselves to a server.
By default, the client generates a request ID based on system time,
this occurs when the value for ‘reqid’ is None.</p>
<p>You may specify your own request ID by passing an integer to the ‘reqid’ parameter.</p>
</div>
<div class="section" id="format-method">
<h3>format_method<a class="headerlink" href="#format-method" title="Permalink to this headline">¶</a></h3>
<p>This parameter specifies how (or how not) packets should be formatted.
Minecraft has a special formatting convention that allows users to add custom
colors or effects to text. Info on that can be found <a class="reference external" href="https://minecraft.gamepedia.com/Formatting_codes">here</a>.</p>
<p>Sometimes, often with the use of extensive plugins,
there can be many format characters within the received data,
which can make it difficult to read the content.
Clients provide formatting methods to make this content more human-readable.</p>
<p>Clients support the following format methods,
and use the following constants to identify them:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>client.REPLACE - Replace all format characters with their appropriate ASCII values</p></li>
<li><p>client.REMOVE - Remove all format characters</p></li>
<li><p>client.RAW - Do not format the content</p></li>
</ol>
</div></blockquote>
<p>For example, if you wanted to remove format characters,
you would instantiate the client like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="s1">&#39;example.host&#39;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">,</span> <span class="n">format_method</span><span class="o">=</span><span class="n">Client</span><span class="o">.</span><span class="n">REMOVE</span><span class="p">)</span>
</pre></div>
</div>
<p>This will configure the client to remove all format characters.
This logic applies to the other format options.
The default operation is to replace format characters.</p>
<p>For more information on formatters, please see the <a class="reference external" href="format.html">Formatter Tutorial.</a></p>
</div>
<div class="section" id="timeout">
<h3>timeout<a class="headerlink" href="#timeout" title="Permalink to this headline">¶</a></h3>
<p>This parameter specifies the timeout length for socket operations.
It is 60 seconds by default, but can be however long/short you want it to be.
The value MUST be an integer. We don’t recommend setting this value too high
or too low.</p>
</div>
</div>
<div class="section" id="context-managers">
<h2>Context Managers<a class="headerlink" href="#context-managers" title="Permalink to this headline">¶</a></h2>
<p>All clients have context manager support:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">client</span> <span class="k">as</span> <span class="n">Client</span><span class="p">(</span><span class="s1">&#39;example.host&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">12345</span><span class="p">):</span>

    <span class="n">client</span><span class="o">.</span><span class="n">do_something</span><span class="p">()</span>
    <span class="n">client</span><span class="o">.</span><span class="n">do_another_thing</span><span class="p">()</span>
</pre></div>
</div>
<p>When the ‘with’ block is exited (or an exception occurs),
then the stop() method will automatically be called.
This ensures that the client always gracefully stops the connection.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>That concludes our tutorial for client usage!</p>
<p>The tutorials on other topics, such as RCON,
will focus on topic specific usage,
and will skip generic client features.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Minecraft-Connection-Tools</a></h1>



<p class="blurb">Tools for interacting with Minecraft servers</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Owen-Cochell&repo=mctools&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Client Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#client-methods">Client Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#instantiating-clients">Instantiating Clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="#context-managers">Context Managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rcon.html">RCON Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="query.html">Query Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ping.html">Ping Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="format.html">Formatting Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="mcli.html">mcli usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/Owen-Cochell/mctools">Github Page</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/mctools/">PyPi Page</a></li>
    
    <li class="toctree-l1"><a href="https://github.com/Owen-Cochell/mctools/issues">Issue Tracker</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="install.html" title="previous chapter">Installation</a></li>
      <li>Next: <a href="rcon.html" title="next chapter">RCON Tutorial</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Owen Cochell.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/client.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>