
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ping Tutorial &#8212; Minecraft-Connection-Tools 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Formatting Tutorial" href="format.html" />
    <link rel="prev" title="Query Tutorial" href="query.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="ping-tutorial">
<h1>Ping Tutorial<a class="headerlink" href="#ping-tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Welcome to the tutorial for PINGClient!
This section aims to give you a basic understanding on PINGClient usage.</p>
</div>
<div class="section" id="basic-ping-usage">
<h2>Basic Ping usage<a class="headerlink" href="#basic-ping-usage" title="Permalink to this headline">¶</a></h2>
<p>mctools gives you the ability to ping
and retrieve basic statistics from a server via the <a class="reference external" href="https://wiki.vg/Server_List_Ping">Server List Ping Interface</a>.
mctools uses a method similar to how the official Minecraft client pings servers.
You can retrieve a lot of useful information, such as ping latency,
server version, message of the day, players connected, ect.</p>
<p>Plus, Server List Ping is built into the protocol, meaning that it is always enabled,
regardless of server configuration.
This gives you a reliable way to get basic server statistics, even if RCON or Query is disabled.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As of now, PINGClient only supports Minecraft servers that are version 1.7 or greater.</p>
</div>
<div class="section" id="creating-the-instance">
<h3>Creating the instance<a class="headerlink" href="#creating-the-instance" title="Permalink to this headline">¶</a></h3>
<p>First, you must create a PINGClient instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mctools</span> <span class="kn">import</span> <span class="n">PINGClient</span>

<span class="n">ping</span> <span class="o">=</span> <span class="n">PINGClient</span><span class="p">(</span><span class="s1">&#39;mc.server.net&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will create a PINGClient instance with the default configuration.
All of the options can be set as you see fit, but the default configuration is recommended for most users.</p>
<p>Unlike other clients, PINGClient allows you to optionally specify the protocol number to use when communicating.
You can do this like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mctools</span> <span class="kn">import</span> <span class="n">PINGClient</span>

<span class="n">ping</span> <span class="o">=</span> <span class="n">PINGClient</span><span class="p">(</span><span class="s1">&#39;mc.server.net&#39;</span><span class="p">,</span> <span class="n">proto_num</span><span class="o">=</span><span class="p">[</span><span class="n">PROTOCOL</span> <span class="n">NUMBER</span><span class="p">])</span>
</pre></div>
</div>
<p>This allows PINGClient to emulate certain versions of the Minecraft client. By default, we use protocol number 0,
which means we are inquiring on which protocol version we should use.
You can find a list of protocol numbers and their versions <a class="reference external" href="https://wiki.vg/Protocol_version_numbers">here</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on general client configuration and instantiation, see the <a class="reference external" href="client.html">client tutorial.</a></p>
</div>
</div>
<div class="section" id="pinging-the-server">
<h3>Pinging the server<a class="headerlink" href="#pinging-the-server" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The server will automatically close the connection after you ping the server or fetch statistics.
This means you must create a new PINGClient after the operation is complete.</p>
</div>
<p>Once you have created your PINGClient, you can ping the server:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elapsed</span> <span class="o">=</span> <span class="n">ping</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>
</pre></div>
</div>
<p>This will return the latency for the ping in milliseconds.
You can use this to determine if a server is receiving connections.</p>
</div>
<div class="section" id="retrieving-statistics">
<h3>Retrieving Statistics<a class="headerlink" href="#retrieving-statistics" title="Permalink to this headline">¶</a></h3>
<p>You can also receive statistics from the server:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stats</span> <span class="o">=</span> <span class="n">ping</span><span class="o">.</span><span class="n">get_stats</span><span class="p">()</span>
</pre></div>
</div>
<p>This will fetch ping stats, and put it into a dictionary.
The contents of the dictionary <em>should</em> be in the following format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;description&#39;</span><span class="p">:</span>
    <span class="p">{</span><span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s1">&#39;Now we got business!&#39;</span><span class="p">},</span>
<span class="s1">&#39;players&#39;</span><span class="p">:</span>
    <span class="p">{</span><span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s1">&#39;online&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;sample&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;fbf11fd0-5b74-490c-adc4-91febe9de2ae&#39;</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;MinecraftPlayer&#39;</span><span class="p">}]},</span>
       <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span>
<span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="mf">0.09879999993245292</span><span class="p">,</span>
<span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;1.15.2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="mi">578</span><span class="p">}</span>
<span class="s1">&#39;favicon&#39;</span><span class="p">:</span> <span class="s1">&#39;data:image/png;base64,&lt;data&gt;&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>The <em>description</em> field is the message of the day.</p>
<p>The <em>players</em> field gives some information about connected players.
It tells us the maximum amount of players allowed on the server at once(<em>max</em>),
as well as how many players are currently connected(<em>online</em>).
It also supplies a sample list of players who are online(<em>sample</em>).
Some very large scale servers might not offer a sample list of connected players, and simply leave it blank.</p>
<p>The <em>message</em> field contains the message embedded in the player sample list. If you have formatting enabled, PINGClient
will automatically separate the message and the valid players. We touch on this more later in the document.</p>
<p>The <em>time</em> field is the latency in milliseconds.</p>
<p>The <em>version</em> field gives some information about the server version.
The <em>name</em> field usually contains the server version, and this can differ if
the server is using a different implementation(Such as <a class="reference external" href="https://papermc.io/">PaperMC</a>,
<a class="reference external" href="https://www.spigotmc.org/">Spigot</a>, or <a class="reference external" href="https://dev.bukkit.org/">Bukkit</a>).
The <em>protocol</em> is the protocol number the server is using.</p>
<p>The <em>favicon</em> field is a <a class="reference external" href="http://en.wikipedia.org/wiki/Portable_Network_Graphics">PNG</a> image
encoded in <a class="reference external" href="http://en.wikipedia.org/wiki/Base64">Base64</a>. This field is optional, and may not be present.</p>
</div>
<div class="section" id="note-on-packet-format">
<h3>Note on Packet Format<a class="headerlink" href="#note-on-packet-format" title="Permalink to this headline">¶</a></h3>
<p>For most cases, the information received will match the example above,
and each field will contain the expected values that they <em>should</em> contain.</p>
<p>However, some servers take it upon themselves to embed messages into the player sample list,
or give the description in <a class="reference external" href="https://wiki.vg/Chat">ChatObject</a> notation. If you have formatting enabled,
then these cases are automatically handled for you.</p>
<p>You can read more about the ping formatters and how they handel data in the <a class="reference external" href="format.html">Forrmatting tutorial</a>.</p>
</div>
<div class="section" id="stopping-the-instance">
<h3>Stopping the instance<a class="headerlink" href="#stopping-the-instance" title="Permalink to this headline">¶</a></h3>
<p>It is recommended to stop the client when it is done being used:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ping</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
<p>This will stop the underlying TCP connection to the Minecraft server.
It is HIGHLY recommended to stop the instance, as not doing so could lead to problems server-side.</p>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>That concludes the tutorial for PINGClient!</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Minecraft-Connection-Tools</a></h1>



<p class="blurb">Tools for interacting with Minecraft servers</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Owen-Cochell&repo=mctools&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="rcon.html">RCON Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="query.html">Query Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Ping Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-ping-usage">Basic Ping usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="format.html">Formatting Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="mcli.html">mcli usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/Owen-Cochell/mctools">Github Page</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/mctools/">PyPi Page</a></li>
    
    <li class="toctree-l1"><a href="https://github.com/Owen-Cochell/mctools/issues">Issue Tracker</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="query.html" title="previous chapter">Query Tutorial</a></li>
      <li>Next: <a href="format.html" title="next chapter">Formatting Tutorial</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Owen Cochell.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/ping.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>